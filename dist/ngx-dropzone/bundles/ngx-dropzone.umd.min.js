!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("q"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-dropzone",["exports","@angular/core","q","@angular/common"],t):t(e["ngx-dropzone"]={},e.ng.core,null,e.ng.common)}(this,function(e,t,i,n){"use strict";function s(i,r){var o,l,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function n(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,l&&(a=2&e[0]?l["return"]:e[0]?l["throw"]||((a=l["return"])&&a.call(l),0):l.next)&&!(a=a.call(l,e[1])).done)return a;switch(l=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,l=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(i,s)}catch(t){e=[6,t],l=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([t,e])}}}var r=function(){function e(){}return e.prototype.parseFile=function(r,o,l,e,a){var t=this;return new Promise(function(n,i){return function e(t,l,a,s){return new(a||(a=Promise))(function(e,n){function i(e){try{o(s.next(e))}catch(t){n(t)}}function r(e){try{o(s["throw"](e))}catch(t){n(t)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(i,r)}o((s=s.apply(t,l||[])).next())})}(t,void 0,void 0,function(){var t;return s(this,function(e){return"*"===o||(o.endsWith("/*")?o.split("/")[0]===r.type.split("/")[0]:o.includes(r.type))?l&&r.size>l?[2,i("File size exceeds maximum file limit")]:(t={lastModified:r.lastModified,name:r.name,preview:null,size:r.size,type:r.type,slice:r.slice},a&&r.type.startsWith("image")?this.readFile(r).then(function(e){t.preview=e,n(t)})["catch"](function(e){return i(e)}):n(t),[2]):[2,i("File has unaccepted file type")]})})})},e.prototype.parseFiles=function(r,o,l,a,s){var p=this;return new Promise(function(e,t){var n={addedFiles:[],rejectedFiles:[]},i=r.map(function(t){return p.parseFile(t,o,l,a,s).then(function(e){n.addedFiles.push(e)})["catch"](function(e){n.rejectedFiles.push({error:e,lastModified:t.lastModified,name:t.name,size:t.size,slice:t.slice,type:t.type})})});Promise.all(i).then(function(){e(n)})})},e.prototype.readFile=function(i){return new Promise(function(t,n){var e=new FileReader;e.onload=function(e){return t(e.target.result)},e.onerror=function(e){return n("FileReader failed on file "+i.name+". No preview image created.")},e.readAsDataURL(i)})},e.decorators=[{type:t.Injectable}],e}(),o=function(){function e(e){this.service=e,this.multiple=!0,this.accept="*",this.showPreviews=!1,this.preserveFiles=!0,this.files=[],this.filesInput=[],this.filesAdded=new t.EventEmitter,this.filesRemoved=new t.EventEmitter,this.filesRejected=new t.EventEmitter,this.filesChanged=new t.EventEmitter,this.disabled=!1,this.hovering=!1}return e.prototype.showFileSelector=function(){this.disabled||this.fileInput.nativeElement.click()},e.prototype.ngOnInit=function(){this.handleFilesSelection(this.filesInput)},e.prototype.onFilesSelected=function(e){var t=this,n=e.target.files;this.handleFileListSelection(n).then(function(){t.fileInput.nativeElement.value=""})},e.prototype.onDragOver=function(e){this.disabled||(this.preventDefault(e),this.hovering=!0)},e.prototype.onDragLeave=function(e){e.currentTarget.contains(e.relatedTarget)||(this.hovering=!1)},e.prototype.onDrop=function(e){this.preventDefault(e),this.hovering=!1,this.handleFileListSelection(e.dataTransfer.files)},e.prototype.removeFile=function(t){var e=this.files.length;this.files=this.files.filter(function(e){return e!=t}),e!=this.files.length&&(this.filesChanged.emit(this.files),this.filesRemoved.emit([t]))},e.prototype.handleFilesSelection=function(e){var n=this;return new Promise(function(t){return n.disabled?i.reject("Dropzone is disabled"):!n.multiple&&1<e.length?i.reject("Cannot accept multiple files"):void n.service.parseFiles(e,n.accept,n.maxFileSize,n.preserveFiles,n.showPreviews).then(function(e){e.addedFiles.length&&(n.multiple&&n.preserveFiles?n.files=n.files.concat(e.addedFiles):n.files=e.addedFiles,n.filesChanged.emit(n.files),n.filesAdded.emit(e.addedFiles)),e.rejectedFiles.length&&n.filesRejected.emit(e.rejectedFiles),t()})})},e.prototype.handleFileListSelection=function(e){return this.handleFilesSelection(Array.from(e))},e.prototype.preventDefault=function(e){e.preventDefault(),e.stopPropagation()},e.decorators=[{type:t.Component,args:[{selector:"ngx-dropzone",template:'<input type="file"\n       #fileInput class="file-input"\n       (change)="onFilesSelected($event)"\n       [multiple]="multiple"\n       [accept]="accept" />\n\n<div class="dropzone"\n     #dropzone>\n  <div class="droparea" (click)="showFileSelector()">\n    <ng-container *ngTemplateOutlet="dropareaTemplate ? dropareaTemplate : dropareaFallbackTemplate">\n    </ng-container>\n  </div>\n  <div *ngIf="showPreviews" class="previews">\n    <ng-container *ngFor="let file of files">\n      <ng-container *ngTemplateOutlet="\n                    previewTemplate ? previewTemplate : previewFallbackTemplate;\n                    context: {\n                      $implicit: {\n                        file: file,\n                        remove: removeFile.bind(this)\n                      }\n                    }">\n      </ng-container>\n    </ng-container>\n  </div>\n</div>\n\n<ng-template #dropareaFallbackTemplate>\n  Click or drop your files here\n</ng-template>\n\n<ng-template #previewFallbackTemplate let-context>\n  <div class="preview-fallback" [class.no-image]="!context.file.preview">\n    <div class="overlay">\n      <div class="content">\n        <div class="filename">{{context.file.name}}</div>\n        <button (click)="context.remove(context.file)">Remove</button>\n      </div>\n    </div>\n    <img *ngIf="context.file.preview" [src]="context.file.preview" />\n  </div>\n</ng-template>\n',styles:[":host(){display:flex;flex-direction:column;height:180px;background:#fff;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px}:host().hovered{border:2px solid #717386;color:#dfdfe4}:host().disabled{opacity:.5;cursor:no-drop}:host():not(.disabled)>.dropzone>.droparea{cursor:pointer}:host()>.dropzone{position:relative;width:100%;min-height:100%;overflow:hidden;display:flex;flex-direction:column}:host()>.dropzone>.droparea{display:flex;align-items:center;justify-content:center;width:100%;flex:1;z-index:4}:host()>.dropzone>.previews{height:50%;width:100%;display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:space-around;overflow-y:auto;overflow-x:hidden}:host()>.dropzone>.previews>.no-image>.filename{padding:10px}:host()>.dropzone>.previews>.preview-fallback{position:relative;text-align:center;max-height:calc(100% - 10px);height:200px;max-width:200px;width:25%;min-width:100px;margin:10px;z-index:0}:host()>.dropzone>.previews>.preview-fallback>img{max-height:100%;max-width:100%;border-radius:5px;opacity:.8;z-index:1}:host()>.dropzone>.previews>.preview-fallback>.overlay{position:absolute;display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.8);width:100%;height:100%;z-index:2}:host()>.dropzone>.previews>.preview-fallback>.overlay>.content{padding:2.5%;max-width:95%;max-height:95%}:host()>.dropzone>.previews>.preview-fallback>.overlay>.content>.filename{text-overflow:ellipsis;overflow:hidden}:host()>.dropzone>.previews.limit-width{max-width:25%}.file-input{display:none}"],providers:[r]}]}],e.ctorParameters=function(){return[{type:r}]},e.propDecorators={dropareaTemplate:[{type:t.ContentChild,args:["droparea"]}],previewTemplate:[{type:t.ContentChild,args:["preview"]}],multiple:[{type:t.Input}],accept:[{type:t.Input}],maxFileSize:[{type:t.Input}],showPreviews:[{type:t.Input}],preserveFiles:[{type:t.Input}],filesInput:[{type:t.Input,args:["files"]}],filesAdded:[{type:t.Output}],filesRemoved:[{type:t.Output}],filesRejected:[{type:t.Output}],filesChanged:[{type:t.Output,args:["filesChange"]}],disabled:[{type:t.HostBinding,args:["class.disabled"]},{type:t.Input}],hovering:[{type:t.HostBinding,args:["class.hovered"]}],fileInput:[{type:t.ViewChild,args:["fileInput"]}],onDragOver:[{type:t.HostListener,args:["dragover",["$event"]]}],onDragLeave:[{type:t.HostListener,args:["dragleave",["$event"]]}],onDrop:[{type:t.HostListener,args:["drop",["$event"]]}]},e}(),l=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],declarations:[o],exports:[o]}]}],e}();e.NgxDropzoneComponent=o,e.NgxDropzoneModule=l,e.Éµa=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-dropzone.umd.min.js.map